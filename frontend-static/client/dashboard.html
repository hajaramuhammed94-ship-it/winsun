<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Winsun | ä»ªè¡¨æ¿</title>

        <!-- CSS -->
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/bootstrap-icons.css" rel="stylesheet">
        <link href="cs.css" rel="stylesheet">
        
        <!-- JavaScript -->
        <script src="js/jquery.min.js"></script>
        
        <style>
            body {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                padding: 20px;
            }
            .dashboard-container {
                max-width: 1200px;
                margin: 0 auto;
            }
            .card {
                background: rgba(255, 255, 255, 0.95);
                border-radius: 15px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                margin-bottom: 20px;
            }
            .user-info {
                background: white;
                padding: 30px;
                border-radius: 15px;
                margin-bottom: 30px;
            }
            .feature-card {
                padding: 20px;
                text-align: center;
                transition: transform 0.3s;
            }
            .feature-card:hover {
                transform: translateY(-5px);
            }
            .feature-icon {
                font-size: 48px;
                margin-bottom: 15px;
            }
            .logout-btn {
                background: #dc3545;
                color: white;
                border: none;
                padding: 10px 30px;
                border-radius: 25px;
                cursor: pointer;
            }
            .logout-btn:hover {
                background: #c82333;
            }
        </style>
        
        <script>
            // é…ç½®
            const CONFIG = {
                AUTH_API: 'https://winsun-backend-9ueb8wgwv-cvsgetyes-projects.vercel.app',
                WINSUN_API: 'https://api.winsun8.com',
                DEBUG: true
            };
            
            /**
             * æ£€æŸ¥ç™»å½•çŠ¶æ€
             */
            function checkAuth() {
                const token = localStorage.getItem('auth_token');
                const userInfo = localStorage.getItem('user_info');
                
                if (!token || !userInfo) {
                    alert('è¯·å…ˆç™»å½•');
                    window.location.href = '/client/login-hybrid.html';
                    return false;
                }
                
                return true;
            }
            
            /**
             * æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯
             */
            function displayUserInfo() {
                const userInfo = JSON.parse(localStorage.getItem('user_info'));
                
                $('#user-email').text(userInfo.email || 'æœªçŸ¥');
                $('#user-name').text(userInfo.username || userInfo.full_name || 'ç”¨æˆ·');
                $('#user-id').text(userInfo.id || 'N/A');
            }
            
            /**
             * è°ƒç”¨ Winsun API è·å–æ•°æ®ç¤ºä¾‹
             */
            function fetchWinsunData() {
                const email = sessionStorage.getItem('winsun_email');
                const password = sessionStorage.getItem('winsun_password');
                
                if (!email || !password) {
                    $('#winsun-status').html('<span class="text-warning">âš ï¸ æœªé…ç½® Winsun API å‡­è¯</span>');
                    return;
                }
                
                // è¿™é‡Œå¯ä»¥è°ƒç”¨ Winsun API
                // ä¾‹å¦‚è·å–äº¤æ˜“ä¿¡å·ã€è´¦æˆ·ä¿¡æ¯ç­‰
                $('#winsun-status').html('<span class="text-success">âœ… Winsun API å·²è¿æ¥</span>');
                
                if (CONFIG.DEBUG) {
                    console.log('Winsun API å‡­è¯å·²é…ç½®');
                    console.log('é‚®ç®±:', email);
                }
            }
            
            /**
             * ç™»å‡º
             */
            function logout() {
                if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                    // æ¸…é™¤æ‰€æœ‰å­˜å‚¨çš„æ•°æ®
                    localStorage.removeItem('auth_token');
                    localStorage.removeItem('user_info');
                    sessionStorage.removeItem('winsun_email');
                    sessionStorage.removeItem('winsun_password');
                    
                    // è·³è½¬åˆ°ç™»å½•é¡µ
                    window.location.href = '/client/login-hybrid.html';
                }
            }
            
            /**
             * é¡µé¢åŠ è½½
             */
            $(document).ready(function() {
                // æ£€æŸ¥ç™»å½•çŠ¶æ€
                if (!checkAuth()) {
                    return;
                }
                
                // æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯
                displayUserInfo();
                
                // æ£€æŸ¥ Winsun API è¿æ¥
                fetchWinsunData();
                
                if (CONFIG.DEBUG) {
                    console.log('ä»ªè¡¨æ¿å·²åŠ è½½');
                }
            });
        </script>
    </head>
    <body>
        <div class="dashboard-container">
            <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
            <div class="user-info">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h2>æ¬¢è¿å›æ¥ï¼Œ<span id="user-name">ç”¨æˆ·</span>ï¼</h2>
                        <p class="mb-1"><strong>é‚®ç®±ï¼š</strong><span id="user-email">-</span></p>
                        <p class="mb-1"><strong>ç”¨æˆ· IDï¼š</strong><span id="user-id">-</span></p>
                        <p class="mb-0"><strong>API çŠ¶æ€ï¼š</strong><span id="winsun-status">æ£€æŸ¥ä¸­...</span></p>
                    </div>
                    <div class="col-md-4 text-end">
                        <button class="logout-btn" onclick="logout()">é€€å‡ºç™»å½•</button>
                    </div>
                </div>
            </div>
            
            <!-- åŠŸèƒ½å¡ç‰‡ -->
            <div class="row">
                <div class="col-md-4">
                    <div class="card feature-card">
                        <div class="feature-icon">ğŸ“Š</div>
                        <h4>äº¤æ˜“ä¿¡å·</h4>
                        <p>æŸ¥çœ‹å®æ—¶äº¤æ˜“ä¿¡å·å’Œå¸‚åœºåˆ†æ</p>
                        <button class="btn btn-primary" onclick="alert('æ­¤åŠŸèƒ½å°†è°ƒç”¨ Winsun API è·å–äº¤æ˜“ä¿¡å·')">æŸ¥çœ‹ä¿¡å·</button>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="card feature-card">
                        <div class="feature-icon">ğŸ’°</div>
                        <h4>è´¦æˆ·ç®¡ç†</h4>
                        <p>ç®¡ç†æ‚¨çš„äº¤æ˜“è´¦æˆ·å’Œèµ„é‡‘</p>
                        <button class="btn btn-primary" onclick="alert('æ­¤åŠŸèƒ½å°†è°ƒç”¨ Winsun API è·å–è´¦æˆ·ä¿¡æ¯')">æŸ¥çœ‹è´¦æˆ·</button>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="card feature-card">
                        <div class="feature-icon">ğŸ“ˆ</div>
                        <h4>å†å²è®°å½•</h4>
                        <p>æŸ¥çœ‹äº¤æ˜“å†å²å’Œç»Ÿè®¡æ•°æ®</p>
                        <button class="btn btn-primary" onclick="alert('æ­¤åŠŸèƒ½å°†è°ƒç”¨ Winsun API è·å–å†å²æ•°æ®')">æŸ¥çœ‹è®°å½•</button>
                    </div>
                </div>
            </div>
            
            <div class="row mt-4">
                <div class="col-md-6">
                    <div class="card feature-card">
                        <div class="feature-icon">âš™ï¸</div>
                        <h4>è®¾ç½®</h4>
                        <p>é…ç½®æ‚¨çš„è´¦æˆ·å’Œåå¥½è®¾ç½®</p>
                        <button class="btn btn-secondary" onclick="alert('è®¾ç½®åŠŸèƒ½')">è¿›å…¥è®¾ç½®</button>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="card feature-card">
                        <div class="feature-icon">ğŸ“±</div>
                        <h4>é€šçŸ¥</h4>
                        <p>ç®¡ç†æ‚¨çš„é€šçŸ¥å’Œæé†’</p>
                        <button class="btn btn-secondary" onclick="alert('é€šçŸ¥åŠŸèƒ½')">æŸ¥çœ‹é€šçŸ¥</button>
                    </div>
                </div>
            </div>
            
            <!-- è¯´æ˜ -->
            <div class="card mt-4" style="padding: 20px;">
                <h5>ğŸ’¡ ç³»ç»Ÿè¯´æ˜</h5>
                <ul>
                    <li><strong>è®¤è¯ç³»ç»Ÿ</strong>ï¼šä½¿ç”¨æ‚¨è‡ªå·±éƒ¨ç½²çš„åç«¯ API è¿›è¡Œç”¨æˆ·è®¤è¯å’Œç®¡ç†</li>
                    <li><strong>åŠŸèƒ½ API</strong>ï¼šç™»å½•åï¼Œå¯ä»¥è°ƒç”¨ Winsun å®˜æ–¹ API è·å–äº¤æ˜“ä¿¡å·ã€å¸‚åœºæ•°æ®ç­‰åŠŸèƒ½</li>
                    <li><strong>æ•°æ®å®‰å…¨</strong>ï¼šæ‚¨çš„ç”¨æˆ·æ•°æ®å­˜å‚¨åœ¨è‡ªå·±çš„æ•°æ®åº“ä¸­ï¼Œå®Œå…¨å¯æ§</li>
                    <li><strong>çµæ´»æ‰©å±•</strong>ï¼šå¯ä»¥éšæ—¶æ·»åŠ æ–°åŠŸèƒ½æˆ–åˆ‡æ¢åˆ°å…¶ä»– API</li>
                </ul>
                
                <h5 class="mt-4">ğŸ”§ å¦‚ä½•ä½¿ç”¨ Winsun API</h5>
                <p>åœ¨ç™»å½•æˆåŠŸåï¼Œç³»ç»Ÿä¼šä¿å­˜å¿…è¦çš„å‡­è¯ã€‚æ‚¨å¯ä»¥åœ¨ä»»ä½•é¡µé¢ä½¿ç”¨ä»¥ä¸‹ä»£ç è°ƒç”¨ Winsun APIï¼š</p>
                <pre style="background: #f5f5f5; padding: 15px; border-radius: 5px; overflow-x: auto;"><code>// è·å–ä¿å­˜çš„å‡­è¯
const email = sessionStorage.getItem('winsun_email');
const password = sessionStorage.getItem('winsun_password');

// è°ƒç”¨ Winsun API
$.ajax({
    type: 'GET',
    url: 'https://api.winsun8.com/api/your-endpoint',
    data: {
        email: email,
        // æ ¹æ® API è¦æ±‚æ·»åŠ å…¶ä»–å‚æ•°
    },
    success: function(data) {
        console.log('Winsun API å“åº”:', data);
    }
});</code></pre>
            </div>
        </div>
    </body>
</html>

